<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Basic</title>
    <style>
        body {
            margin: 0;
            overflow: auto;
        }
        canvas {
            /*position: fixed;*/
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw !important;
            height: 100vh !important;
            display: block;
            pointer-events: none; /* optional, lets clicks go through */
            z-index: -10;
            
        }
        #textbox {
            /*position: absolute;*/
            /*top: 20%;*/
            /*left: 20%;
            transform: translate(-50%, -50%);*/
            display: flex;
            flex-direction: column;
            align-items: left;
            justify-content: left;
            /*padding: 1vw 2vw;*/
            background: transparent;
            color: white;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 18px;
            z-index: 10;
            /*max-width: 100vw;*/
            box-sizing: border-box;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
        }
        #textbox h2, #textbox a, #textbox p {
            margin: 5px 0;
            padding: 0;
            white-space: nowrap;
            word-break: normal;
        }
        #textbox img {
            max-width: 100%;
            display: flex;
        }
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/"
            }
        }
    </script>


</head>

<div>

    <!--W poniższym divie możesz dorzucać nowy tekst do textboxa -->
<iframe src="/static/wwi2025/schedule.html" 
        style="width:100%; height: 750px; border:none;">
</iframe>
    <div id="textbox">
        <h2> <a href=https://git.staszic.waw.pl/top/materialy/dla-uczestnikow/wwi-2025-grupa-2>MATERIAŁY NA GITLABIE</a><br><p style="font-size:50%;"><a href=https://git.staszic.waw.pl/top/materialy/dla-uczestnikow/wwi-2025-grupa-2>MATERIAŁY NA GITLABIE</a></p></h2>
        <a href="https://cooltext.com"><img src="https://images.cooltext.com/5738231.gif" width="694" height="105" alt="Konsultacje w AULI" /></a>
        <a href="https://cooltext.com"><img src="https://images.cooltext.com/5737961.png" width="539" height="98" alt="Są Drożdżówki!" /></a>
    </div>


<script>
(function () {
  const SRC = "https://static.wikitide.net/italianbrainrotwiki/2/21/Tung_Tung_Tung_Sahur_Audio.wav";

  const audio = new Audio(SRC);
  audio.preload = "auto";

  function unlockAudio(e) {
    e.preventDefault();
    e.stopPropagation();

    audio.play().catch(err => console.log("Autoplay blocked:", err));

    document.removeEventListener("click", unlockAudio, true);
  }

  document.addEventListener("click", unlockAudio, true);
})();
</script>

<!-- Poniżej jest kod w Three.js -->
<script type="module">      
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    const loader = new GLTFLoader();

    // Replace 'your-div-id' with the actual ID or class of your target div
    /*const container = document.getElementsByClassName('dashboard-message')[0];*/
    const container = document.getElementById('container');
    const w = window.innerWidth;
    const h = window.innerHeight;

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(w, h);
renderer.domElement.style.position = 'fixed';  // stay fixed while scrolling
    renderer.setClearColor(0x000000);
    renderer.shadowMap.enabled = true;
    document.body.appendChild(renderer.domElement); // Use the whole window

    const fov = 40;
    const aspect = w / h;
    const near = 0.1;
    const far = 1000;
    const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
    camera.position.set(0, 0, 0);
    camera.lookAt(0, 0, 0);
    let angle = 0;

    const scene = new THREE.Scene();

    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(1, 4, 1);
    light.castShadow = true; // Enable shadow casting for the light
    scene.add(light);

    
    const starGeometry = new THREE.BufferGeometry();
    const starCount = 20000;
    const starVertices = [];

    for (let i = 0; i < starCount; i++) {
    const x = (Math.random() - 0.5) * 2000;
    const y = (Math.random() - 0.5) * 2000;
    const z = (Math.random() - 0.5) * 2000;
     if (Math.sqrt(x * x + y * y + z * z) < 100) {
            continue; // Skip this star if it's too close
        }
    starVertices.push(x, y, z);
    }

    starGeometry.setAttribute("position", new THREE.Float32BufferAttribute(starVertices, 3));

    // Star material
    const starMaterial = new THREE.PointsMaterial({ color: 0xffffff });
    const stars = new THREE.Points(starGeometry, starMaterial);

    scene.add(stars);

    

    //Amogus stars
    /*
    loader.load(
        'https://raw.githubusercontent.com/Ponczek94x/wwidashboard/main/among-us-white/source/Among%20US%20%5B%20White%20%5D.glb',
        function (gltf) {
            const original = gltf.scene;

            // star copies
            for (let i = 0; i < 10000; i++) {
                const starModel = original.clone();
                starModel.position.set(
                    (Math.random() - 0.5) * 200,
                    (Math.random() - 0.5) * 200,
                    (Math.random() - 0.5) * 200
                );

                // Ensure the star is not too close to the camera
                if ((starModel.position.x * starModel.position.x +
                    starModel.position.y * starModel.position.y +
                    starModel.position.z * starModel.position.z) < 30) {
                    continue; // Skip this star if it's too close
                }
                // Set a random color for the star
                const color = new THREE.Color(Math.random(), Math.random(), Math.random());

                //set rotation
                starModel.rotation.x = Math.random() * Math.PI;
                starModel.rotation.y = Math.random() * Math.PI;
                starModel.rotation.z = Math.random() * Math.PI;
                //starModel.scale.set(0.1, 0.1, 0.1);
                scene.add(starModel);
            }

        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );
    */


    let rotationz = 0;
    let rotationy = 0;

    let model, model2, model3, model4;
    
    loader.load(
        'https://raw.githubusercontent.com/Ponczek94x/wwidashboard/main/brainrot/tralalero_tralala.glb',
        function (gltf) {
            const original = gltf.scene;

            // First copy
            model = original.clone();
            let cory = (Math.random()-0.5)*2;
            model.position.set(-10, cory, -10);
            model.scale.set(0.2, 0.2, 0.2);
            scene.add(model);

        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );

    loader.load(
        'https://raw.githubusercontent.com/Ponczek94x/wwidashboard/main/brainrot/chimpanzini_bananini.glb',
        function (gltf) {
            const original = gltf.scene;

            // Second copy
            model2 = original.clone();
            let cory = (Math.random()-0.5)*2;
            model2.position.set(6, cory, -7);
            //model2.scale.set(0.1, 0.1, 0.1);
            scene.add(model2);

        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );

    loader.load(
        'https://raw.githubusercontent.com/Ponczek94x/wwidashboard/main/brainrot/tung_tung_tung_sahur.glb',
        function (gltf) {
            const original = gltf.scene;

            // Third copy
            model3 = original.clone();
            let cory = (Math.random()-0.5)*2;
            model3.scale.set(0.2, 0.2, 0.2);
            model3.position.set(5, cory, 6);
            scene.add(model3);

        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );

    loader.load(
        'https://raw.githubusercontent.com/Ponczek94x/wwidashboard/main/brainrot/bombardiro_crocodilo.glb',
        function (gltf) {
            const original = gltf.scene;

            // Fourth copy
            model4 = original.clone();
            let cory = (Math.random()-0.5)*2;
            model4.position.set(-4, cory, 0);
            scene.add(model4);

        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );

    
    loader.load(
        'https://raw.githubusercontent.com/Ponczek94x/wwidashboard/main/brainrot/ballerina_cappucina.glb',
        function (gltf) {
            const original = gltf.scene;

            // Fifth copy
            model5 = original.clone();
            let cory = (Math.random()-0.5)*2;
            model5.position.set(-1, cory, 1);
            scene.add(model5);

        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );



    function animate() {
        const lookX = Math.cos(angle);
        const lookZ = Math.sin(angle);
        camera.lookAt(lookX, 0, lookZ);
        if(model){
            model.rotation.y += 0.003;
            model.rotation.z += 0.004;
        }
        if(model2){
            model2.rotation.y += 0.005;
            model2.rotation.x += 0.002;
        }
        if(model3){
            model3.rotation.x += 0.004;
            model3.rotation.z += 0.003;
        }
        if(model4){
            model4.rotation.y += 0.002;
            model4.rotation.x += 0.001;
        }
        
        /*
        if(model5){
            model5.rotation.y += 0.008;
            model5.rotation.x += 0.002;
            model5.rotation.z += 0.003;
        }*/
       

        renderer.render(scene, camera);
        angle += 0.001;
    }

    // Handle window resize only when it happens
    window.addEventListener('resize', () => {
        const w = window.innerWidth;
        const h = window.innerHeight;
        renderer.setSize(w, h);
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
    });

    renderer.setAnimationLoop(animate);

</script>

</div>  